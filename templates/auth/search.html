{% extends "base.html" %}
{% block title %}Search{% endblock %}

{% block header %}

    <div class="header_modal">
        <div class="header_right">
            <a href="{{url_for('logout')}}">Logout</a>
            <a href="{{url_for('search')}}">検索</a>
            <a href="{{url_for('info')}}">新規提携</a>
            <a href="{{url_for('favorite')}}">おすすめ</a>

            {% if current_user.id == 1 %}
                <a href="{{url_for('edit')}}">パスワード変更</a>
                <a href="{{url_for('create')}}">店舗追加</a>
            {% endif %}
        </div>
    </div>

    <div class="burger_btn">
        <span class="bar bar_top"></span>
        <span class="bar bar_mid"></span>
        <span class="bar bar_bottom"></span>
    </div>

{% endblock %}

{% block content %}

{% if request.method == 'GET' %}

    <div class="search">
        <img src="{{url_for('static', filename='outputs/storeParam(3).jpg')}}" alt="" class="search_img">
        <div class="search_wrapper">
            <h1>Search</h1>
            <div class="container">
                <form action="" method="POST">

                    <label for="keyword" class="label">キーワードで検索</label>
                    <input type="text" name="keyword" class="form-control form">

                    <label for="pref" class="label">エリアで検索</label>
                    <select name="pref" class="form-select form-select-sm form" id="">
                        <option value="">エリアを選択する</option>
                        <option value="北海道">北海道</option>
                        <option value="青森県">青森県</option>
                        <option value="岩手県">岩手県</option>
                        <option value="宮城県">宮城県</option>
                        <option value="秋田県">秋田県</option>
                        <option value="山形県">山形県</option>
                        <option value="福島県">福島県</option>
                        <option value="茨城県">茨城県</option>
                        <option value="栃木県">栃木県</option>
                        <option value="群馬県">群馬県</option>
                        <option value="埼玉県">埼玉県</option>
                        <option value="千葉県">千葉県</option>
                        <option value="東京都">東京都</option>
                        <option value="神奈川県">神奈川県</option>
                        <option value="新潟県">新潟県</option>
                        <option value="富山県">富山県</option>
                        <option value="石川県">石川県</option>
                        <option value="福井県">福井県</option>
                        <option value="山梨県">山梨県</option>
                        <option value="長野県">長野県</option>
                        <option value="岐阜県">岐阜県</option>
                        <option value="静岡県">静岡県</option>
                        <option value="愛知県">愛知県</option>
                        <option value="三重県">三重県</option>
                        <option value="滋賀県">滋賀県</option>
                        <option value="京都府">京都府</option>
                        <option value="大阪府">大阪府</option>
                        <option value="兵庫県">兵庫県</option>
                        <option value="奈良県">奈良県</option>
                        <option value="和歌山県">和歌山県</option>
                        <option value="鳥取県">鳥取県</option>
                        <option value="島根県">島根県</option>
                        <option value="岡山県">岡山県</option>
                        <option value="広島県">広島県</option>
                        <option value="山口県">山口県</option>
                        <option value="徳島県">徳島県</option>
                        <option value="香川県">香川県</option>
                        <option value="愛媛県">愛媛県</option>
                        <option value="高知県">高知県</option>
                        <option value="福岡県">福岡県</option>
                        <option value="佐賀県">佐賀県</option>
                        <option value="長崎県">長崎県</option>
                        <option value="熊本県">熊本県</option>
                        <option value="大分県">大分県</option>
                        <option value="宮城県">宮城県</option>
                        <option value="鹿児島県">鹿児島県</option>
                        <option value="沖縄県">沖縄県</option>
                    </select>

                    <label for="industry" class="label">業種で検索</label>
                    <select name="industry" class="form-select form-select-sm form" id="">
                        <option value="">業種で選ぶ</option>
                        <option value="ラウンジ">ラウンジ</option>
                        <option value="朝キャバ">朝キャバ</option>
                        <option value="キャバクラ">キャバクラ</option>
                        <option value="ニュークラブ">ニュークラブ</option>
                        <option value="セクキャバ">セクキャバ</option>
                        <option value="メンズエステ">メンズエステ</option>
                        <option value="回春エステ">回春エステ</option>
                        <option value="オナクラ">オナクラ</option>
                        <option value="ピンサロ">ピンサロ</option>
                        <option value="店舗型ヘルス">店舗型ヘルス</option>
                        <option value="ホテヘル">ホテヘル</option>
                        <option value="デリヘル">デリヘル</option>
                        <option value="ソープ">ソープ</option>
                    </select>

                    <input type="submit" value="検索" class="search_btn btn btn-dark">

                </form>
            </div>
        </div>
    </div>

{% else %}

    {% if store_all == [] %}

        <div class="search">
            <img src="{{url_for('static', filename='outputs/storeParam(3).jpg')}}" alt="" class="post_img">
            <div class="err_wrapper">
                <h1>No Data</h1>
                <p class="err_msg">＊{{ err_msg }}</p>
                <a href="{{url_for('search')}}" class="err_link">検索ページに戻る</a>
            </div>
        </div>

    {% else %}

    <div class="search">
        <img src="{{url_for('static', filename='outputs/storeParam(3).jpg')}}" alt="" class="post_img">
        <h1 class="search_title">Result</h1>
        <div class="search_post">
            <div class="container search_check" data-type="check">
                <h2>絞り込み検索</h2>
                    <div class="check_list">
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">送迎有
                                <input type="checkbox" name="check" value="送迎有" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">出稼ぎ対応可
                                <input type="checkbox" name="check" value="出稼ぎ対応可" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">マット無し対応可
                                <input type="checkbox" name="check" value="マット無し対応可" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">S着
                                <input type="checkbox" name="check" value="S着" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">NS
                                <input type="checkbox" name="check" value="NS" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">混合店
                                <input type="checkbox" name="check" value="混合店" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">採用幅広い
                                <input type="checkbox" name="check" value="採用幅広い" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">30代OK
                                <input type="checkbox" name="check" value="30代OK" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">40代OK
                                <input type="checkbox" name="check" value="40代OK" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">タトゥー対応可
                                <input type="checkbox" name="check" value="タトゥー対応可" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                        <div class="list_check form-check form-switch">
                            <label for="flexSwitchCheckDefault" class="check_tag form-check-label">傷・リスカ跡対応可
                                <input type="checkbox" name="check" value="傷・リスカ跡対応可" id="flexSwitchCheckDefault" class="check_box form-check-input">
                            </label>
                        </div>
                    </div>

            </div>

            <p class="count"><span class="result_icon bi bi-box-seam"></span>検索結果：<span class="target_count">{{count}}</span>件</p>

            {% for store in store_all %}

                <article class="article_items" data-check="{{store.store_tag}}">
                    <a href="{{store.id}}/detail" class="store">
                        <img src="{{url_for('static', filename=store.store_img)}}" alt="" class="store_img">
                        <div class="store_info">
                            <h2 class="name">{{ store.name }}</h2>
                            <p class="industry"><span class="industry_icon bi bi-pin-fill"></span>{{ store.industry }}</p>
                            <p class="pref">
                                {% set list1 = store.pref.split(',') %}
                                {% for pref in list1 %}
                                    <span class="pref_text">{{ pref }}</span>
                                {% endfor %}
                            </p>
                            <p class="tag">
                                {% set list3 = store.store_tag.split(',') %}
                                {% for store_tag in list3 %}
                                    <span class="tag_text">{{ store_tag }}</span>
                                {% endfor %}
                            </p>
                        </div>
                    </a>
                </article>
                
            {% endfor %}

        </div>

    </div>

    {% endif %}

{% endif %}

{% endblock %} 

{% block footer %}

{% if request.method == 'GET' %}

    <h1 class="footer_title">Category</h1>

    <div class="variation">
        <a href="{{url_for('info')}}" class="variation_link">
            <img src="{{url_for('static', filename='outputs/storeParam(4).jpg')}}" alt="" class="variation_img">
            <p>新規提携</p>
            <span class="v_bi bi bi-box-arrow-up-right"></span>
        </a>

        <a href="{{url_for('favorite')}}" class="variation_link">
            <img src="{{url_for('static', filename='outputs/storeParam(5).jpg')}}" alt="" class="variation_img">
            <p>おすすめ</p>
            <span class="v_bi bi bi-box-arrow-up-right"></span>
        </a>
    </div>

    <h1 class="footer_title">Contact</h1>

    <div class="contact">
        <a href="" class="contact_link">
            <p>twitter</p>
            <span class="sns_icon bi bi-twitter"></span>
        </a>

        <a href="" class="contact_link">
            <p>instagram</p>
            <span class="sns_icon bi bi-instagram"></span>
        </a>
    </div>

    <div class="copy_right">
        <p>© 2022 mui all rights reserved.</p>
    </div>

{% else %}

    <div class="footer_contents">
        <div class="footer_items">
            <a href="{{url_for('logout')}}">Logout</a>
            <a href="{{url_for('search')}}">検索</a>
            <a href="{{url_for('info')}}">新規提携</a>
            <a href="{{url_for('favorite')}}">おすすめ</a>
            {% if current_user.id == 1 %}
                <a href="{{url_for('edit')}}">パスワード変更</a>
                <a href="{{url_for('create')}}">店舗追加</a>
            {% endif %}
        </div>
        <div class="sns_items">
            <a href="" class="sns_link"><span class="sns_icon bi bi-twitter"></span></a>
            <a href="" class="sns_link"><span class="sns_icon bi bi-instagram"></span></a>
        </div>
    </div>
    <div class="copy_right">
        <p>© 2022 mui all rights reserved.</p>
    </div>

{% endif %}

{% endblock %}